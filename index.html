<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8 Reinas</title>

    <style>
        table {
            border: 1px solid;
            border-collapse: collapse;
        }
        
        tr {
            border: 1px solid;
            border-collapse: collapse;
        }
        
        td {
            border: 1px solid;
            border-collapse: collapse;
            width: 50px;
            height: 50px;
        }
        
        tr:nth-child(even) td:nth-child(even),
        tr:nth-child(odd) td:nth-child(odd) {
            background-color: black;
        }
        
        tr:nth-child(odd) td:nth-child(even),
        tr:nth-child(odd) td:nth-child(even) {
            background-color: white;
        }
        
        div {
            font-size: xx-large;
        }
    </style>
    <script>
        var contador = 0;

        function celdaclick(ana) {
            //Este if valida si la celda tiene imagen de fondo o no
            if ((window.getComputedStyle(ana).backgroundImage) == "none") {
                if (contador != 8) {
                    contador++;
                    ana.style = "background-image:url(./reina.png); background-repeat:no-repeat; background-size: cover;";
                }

            } else {
                contador--;
                ana.style = "background-image:none;";
            }
            document.getElementById("div_contador").innerHTML = "Reinas Colocadas: " + contador;

        }

        function simulacion() {
            if (contador != 8) {
                console.log("No se han colocado las 8 reinas")
                return;
            }
            console.clear();

            var celdas = document.getElementById("tablero").getElementsByTagName("td");

            var simulacionCorrecta = true;

            var suma_restas = 0;
            for (let i = 0; i < celdas.length; i++) {
                renglon = Math.floor(i / 8);
                if ((window.getComputedStyle(celdas[i]).backgroundImage) != "none") {
                    suma_restas += renglon - (i % 8);
                }
            }
            simulacionCorrecta = suma_restas == 0;

            if (simulacionCorrecta) {
                console.log("BIEN");
            } else {
                console.log("MAL");
            }

        }

        function reiniciar() {
            var celdas = document.getElementById("tablero").getElementsByTagName("td");
            for (let i = 0; i < celdas.length; i++) {
                celdas[i].style = "background-image: none;";


            }
            contador = 0;
            document.getElementById("div_contador").innerHTML = "Reinas Colocadas: " + contador;

        }

        function solucion1() {
            reiniciar();
            var celdas = document.getElementById("tablero");

            //celdas.rows[0].cells[4].style = "background-image:url(./reina.png); background-repeat:no-repeat; background-size: cover;";

            let solucion = [
                [0, 4],
                [1, 1],
                [2, 3],
                [3, 6],
                [4, 2],
                [5, 7],
                [6, 5],
                [7, 0]
            ]
            solucion.forEach(element => {
                celdas.rows[element[0]].cells[element[1]].style = "background-image:url(./reina.png); background-repeat:no-repeat; background-size: cover;";

            });
            contador = 8;
            document.getElementById("div_contador").innerHTML = "Reinas Colocadas: " + contador;


        }

        function solucion2() {}
    </script>
</head>

<body>

    <table id="tablero">
        <tr>
            <td onclick="celdaclick(this)"> </td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>

        <tr>

            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>
        <tr>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>
        <tr>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>
        <tr>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>
        <tr>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>
        <tr>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>
        <tr>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
            <td onclick="celdaclick(this)"></td>
        </tr>
    </table>
    <div id="div_contador">
        Reinas Colocadas: 0
    </div>
    <button onclick="simulacion()">
        Simulación
    </button>
    <button onclick="reiniciar()">
        Reiniciar
    </button>
    <button onclick="solucion1()">
        Solución 1
    </button>
    <button>
        Solución 2
    </button>
</body>

</html>